*================================================================================*  
*================================================================================*
* Written by : Steve Fasoranti                                                   *
* Student Number: C00275756                                                      *
* Description: Here we decalre when the runner jumps that he has anti gravity    *
*            so hes able to go as high as he wants but appartenly was supposed to*
*              come back down but i broke it :)                                  *
*================================================================================*
*================================================================================*
*.----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------. 
*| .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. |
*| |    ______    | || |  _______     | || |      __      | || | ____   ____  | || |     _____    | || |  _________   | || |  ____  ____  | |
*| |  .' ___  |   | || | |_   __ \    | || |     /  \     | || ||_  _| |_  _| | || |    |_   _|   | || | |  _   _  |  | || | |_  _||_  _| | |
*| | / .'   \_|   | || |   | |__) |   | || |    / /\ \    | || |  \ \   / /   | || |      | |     | || | |_/ | | \_|  | || |   \ \  / /   | |
*| | | |    ____  | || |   |  __ /    | || |   / ____ \   | || |   \ \ / /    | || |      | |     | || |     | |      | || |    \ \/ /    | |
*| | \ `.___]  _| | || |  _| |  \ \_  | || | _/ /    \ \_ | || |    \ ' /     | || |     _| |_    | || |    _| |_     | || |    _|  |_    | |
*| |  `._____.'   | || | |____| |___| | || ||____|  |____|| || |     \_/      | || |    |_____|   | || |   |_____|    | || |   |______|   | |
*| |              | || |              | || |              | || |              | || |              | || |              | || |              | |
*| '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' |
*'----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------' 

*------------------------------------------------------------------------------------*
*------------------------------------------------------------------------------------*
*--------------Update the position of the player back to the ground------------------*
*------------------------------------------------------------------------------------*
*------------------------------------------------------------------------------------*
updateRunnerGravity
        jsr     RunnerGravityRoutine
        jsr     checkForRunnerGround
        jsr     checkForEnemyGround
        rts

*----------------------------------------------------------------------*
*----------------------------------------------------------------------*
*--------------If you press space the player jumps up------------------*
*----------------------------------------------------------------------*
*----------------------------------------------------------------------*
RunnerGravityRoutine
        move.b          #GET_KEY_INPUT_COMMAND,d0
        move.l          #SPACE_KEY,d1
        TRAP            #15
        cmpi.b          #0,d1
        bne             exitGravity
        move.l          RunnerJumping, d5
        cmpi.l          #1, d5
*--------------------------------------------------------------------------------*
*--------------------------------------------------------------------------------*
*--------------If player is moving left or right then dont jump------------------*
*--------------------------------------------------------------------------------*
*--------------------------------------------------------------------------------*
        move.b          #GET_KEY_INPUT_COMMAND,d0
        move.l          #$41,d1
        TRAP            #15
        cmpi.b          #0,d1
        bne             applyRunnerGravity
        
        move.b          #GET_KEY_INPUT_COMMAND,d0
        move.l          #$44,d1
        TRAP            #15
        cmpi.b          #0,d1
        bne             applyRunnerGravity
        
*------------------------------------------------------------*
*------------------------------------------------------------*
*--------------Change to jumping sprite----------------------*
*------------------------------------------------------------*
*------------------------------------------------------------*
        move.l          RunnerJumpSprite, RunnerChunkX

*------------------------------------------------------------*
*------------------------------------------------------------*
*--------------Speed of the runner---------------------------*
*------------------------------------------------------------*
*------------------------------------------------------------*        
applyRunnerGravity
        move.l          RunnerVelocity, d0
        move.l          #Gravity, d1
        add.l           d1, d0
        move.l          d0, RunnerVelocity        
        move.l          RunnerY, d4
        add.l           RunnerVelocity, d4
        move.l          d4, RunnerY
        rts
*------------------------------------------------------------------------------------------------------------------------------------*
*------------------------------------------------------------------------------------------------------------------------------------*
*--------------Check and see if the runner is on the ground if they are then return back to the normal first sprite------------------*
*------------------------------------------------------------------------------------------------------------------------------------*
*------------------------------------------------------------------------------------------------------------------------------------*        
checkForRunnerGround

    move.l  RunnerY, d4
    add.l   RunnerVelocity, d4

    lsr     #FRAC_BITS, d4
    move.l  Ground, d5
    cmp     d5, d4
    BGT     setRunnerGround     
    
returnRunnerGround    
    rts

*------------------------------------------------------------*
*------------------------------------------------------------*
*--------------Set it back to the running sprite-------------*
*------------------------------------------------------------*
*------------------------------------------------------------*  
setRunnerGround
    move.l  #0, RunnerVelocity
    move.l  RunnerIdleSprite, RunnerChunkX
    jsr     updatePlayersBackGrounds
    move.l  Ground, d4
    lsl     #FRAC_BITS, d4
    move.l  d4, RunnerY
    move.l  #0, RunnerJumping       
        

exitGravity
        rts

*------------------------------------------------------------*
*------------------------------------------------------------*
*------To check and see if the enemy is on the ground--------*
*------------------------------------------------------------*
*------------------------------------------------------------*         
checkForEnemyGround
    move.l  EnemyY, d4
    add.l   EnemyVelocity, d4
    lsr     #FRAC_BITS, d4
    move.l  Ground, d5

    sub.l   #5, d5
    cmp     d5, d4
    BGT     setEnemyGround     

*------------------------------------------------------------*
*------------------------------------------------------------*
*--------------Enemy is set to the round---------------------*
*------------------------------------------------------------*
*------------------------------------------------------------*     
returnEnemyGround    
    rts
    
setEnemyGround
    move.l  #0, EnemyVelocity
    move.l  EnemyIdleSprite, EnemyChunkX
    jsr     updatePlayersBackGrounds
    move.l  Ground, d4
    sub.l   #10, d4
    lsl     #FRAC_BITS, d4
    move.l  d4, EnemyY

    

    move.l  #0,d1
    move.l  #0,d2
    move.l  #73,d0
    Trap    #15
    
    bra     returnEnemyGround


*~Font name~Courier New~
*~Font size~10~
*~Tab type~1~
*~Tab size~4~
